jQuery(function($){$("table.paymentplans").on("click","a.delete_plan",function(a){var n=confirm(wc_deposits_payment_plans_params.i18n_delete_plan);return n?!0:!1}),$("table.wc-deposits-plan").on("click",".add-row",function(){var a=$("table.wc-deposits-plan"),n=$(this).closest("tr");return n.after(a.data("row")),$("table.wc-deposits-plan").find(".plan_interval_amount, .plan_amount").change(),!1}).on("click",".remove-row",function(){var a=$(this).closest("tr");return a.remove(),$("table.wc-deposits-plan").find(".plan_interval_amount, .plan_amount").change(),!1}).on("change input",".plan_amount",function(){var a=$("table.wc-deposits-plan"),n=0;a.hasClass("fixed")?n=100:a.find(".plan_amount").each(function(){n+=parseFloat($(this).val()||0)}),a.find(".total_percent").text(n)}).on("change input",".plan_interval_amount, .plan_interval_unit",function(){var a=$("table.wc-deposits-plan"),n=a.find(".total_duration"),t=0,e=[],l=0,i=0,p=0,o=!1;a.find(".plan_interval_amount").each(function(){var a=$(this).closest("tr").find(".plan_interval_unit").val(),n=parseInt($(this).val());"day"===a&&(p+=n),"week"===a&&(p+=7*n),"year"===a&&(l+=n),"month"===a&&(i+=n)}),l&&(e.push(l+" "+n.data("years")),o=!0),i&&(e.push(i+" "+n.data("months")),o=!0),(p||!o)&&e.push(p+" "+n.data("days")),n.text(e.join(", "))}),$("#deposit-plan-form").on("change input",".wc-deposits-plan-type input",function(){var a=$("table.wc-deposits-plan"),n=$(this).prop("value"),t=$("<div/>").html(a.data("row"));a.removeClass().addClass("wc-deposits-plan "+n),a.data("plan-type",n),"fixed"===n?(t.find("tr").addClass("remainder"),t.find(".cell-amount input").attr("type","hidden").val("remainder"),t.find(".cell-amount").append(wc_deposits_payment_plans_params.plan_remainder),a.find("tbody").append(t.html()),a.find(".total_percent").text(100)):(a.find("tr.remainder").remove(),a.find(".plan_amount").change())}),$("table.wc-deposits-plan").find(".plan_interval_amount, .plan_amount").change()});